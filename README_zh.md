[English](README.md) | [中文](README_zh.md)

# HelloMyGene (个人基因图谱分析系统)

HelloMyGene 是一个基于 FastAPI 的个人基因图谱分析系统。它允许用户上传基因型数据文件（.txt 格式），并利用 AI 生成详细的基因健康报告，包括疾病风险、药物反应、遗传特征等。

## ✨ 主要功能

- **基因数据上传**: 支持上传常见的基因型原始数据文件（.txt）。
- **智能分析**: 解析基因位点，结合内置知识库进行健康风险评估。
- **可视化报告**: 提供直观的 HTML 交互式报告。
- **PDF 导出**: 支持将基因报告导出为 PDF 格式，方便保存和分享。
- **本地化支持**: 完美支持中文报告生成。

## � 基因特征库

HelloMyGene 内置了丰富的基因位点知识库，涵盖以下主要领域：

### 1. ACMG59 遗传病筛查
基于 ACMG (美国医学遗传学与基因组学学会) SF v3.2 指南，筛查 59 种严重但可干预的单基因遗传病，包括：
- **肿瘤综合征**: 遗传性乳腺癌/卵巢癌 (BRCA1/2)、林奇综合征 (Lynch)、Li-Fraumeni 综合征 (TP53) 等。
- **心血管疾病**: 长QT综合征、家族性高胆固醇血症 (LDLR)、肥厚型心肌病等。

### 2. 药物基因组学 (PGx)
覆盖 **53 种** 常用药物的代谢和反应预测，依据 CPIC 和 PharmGKB 指南：
- **心血管用药**: 华法林 (Warfarin)、氯吡格雷 (Clopidogrel)、他汀类降脂药。
- **精神神经类**: SSRI 类抗抑郁药、阿片类镇痛药 (可待因、曲马多)。
- **抗肿瘤/免疫**: 他克莫司、氟尿嘧啶、硫嘌呤类。
- **抗感染**: 伏立康唑、异烟肼等。

### 3. 多基因风险评分 (PRS)
利用 GWAS 大数据评估复杂疾病的遗传易感性：
- **肿瘤易感性 (17项)**: 肺癌、肝癌、胃癌、结直肠癌、前列腺癌、乳腺癌、甲状腺癌等。
- **慢性病风险 (62项)**: 
    - **心脑血管**: 冠心病、高血压、房颤、脑卒中。
    - **内分泌/代谢**: 2型糖尿病、高血脂、痛风、甲状腺功能减退。
    - **免疫/骨科**: 类风湿关节炎、红斑狼疮、强直性脊柱炎、骨关节炎。
    - **神经精神**: 阿尔茨海默病、帕金森病、偏头痛、抑郁倾向。

### 4. 个人特质与健康管理
- **营养代谢**: 酒精/咖啡因代谢能力、乳糖不耐受、维生素 (A/B12/C/D/E) 及矿物质 (钙/铁/锌) 需求。
- **运动基因**: 爆发力/耐力潜力 (ACTN3)、运动减肥效果、运动损伤风险 (跟腱/韧带)、恢复速度。
- **肌肤特质**: 抗糖化/抗氧化能力、雀斑易感性、皮肤弹性、抗晒黑能力。
- **心理特质**: 抗压能力 (COMT)、共情能力、新奇追求倾向、睡眠节律 (百灵鸟/猫头鹰型)。
- **其他特征**: 绝对音准、耳朵耵聍类型 (干/湿)、味觉敏感度等。

## �🛠️ 技术栈

- **后端框架**: [FastAPI](https://fastapi.tiangolo.com/) - 高性能 Python Web 框架
- **数据库**: SQLite (通过 SQLAlchemy 和 aiosqlite 访问)
- **模板引擎**: Jinja2
- **PDF 生成**: xhtml2pdf & reportlab
- **数据处理**: pandas

## 🚀 快速开始

### 环境要求

- Python 3.12 或更高版本
- [uv](https://github.com/astral-sh/uv) (推荐) 或 pip

### 安装依赖

如果使用 `uv` (推荐):

```bash
uv sync
```

或者使用 `pip`:

```bash
pip install .
```

### 运行应用

开发模式启动（支持热重载）：

```bash
uv run uvicorn src.app:app --reload
```

或者直接运行入口脚本：

```bash
python main.py
```

服务启动后，访问: http://127.0.0.1:8000

## 📖 使用指南

1.  打开浏览器访问首页。
2.  点击上传区域，选择您的基因型数据文件（.txt 格式）。
3.  等待系统解析和分析（通常只需几秒钟）。
4.  查看生成的详细基因报告。
5.  如需保存，点击页面右上角的 "下载 PDF" 按钮。

## 📂 项目结构

```
HelloMyGene/
├── data/               # 数据存储
│   └── raw/            # 原始上传文件
├── src/                # 源代码
│   ├── analysis/       # 分析逻辑 (解析器, 报告生成)
│   ├── database/       # 数据库模型与初始化
│   ├── models/         # Pydantic 数据模型
│   ├── static/         # 静态资源 (CSS, 字体)
│   ├── web/            # Web 前端 (模板)
│   └── app.py          # FastAPI 主应用
├── main.py             # 启动入口
├── pyproject.toml      # 项目配置与依赖
└── README.md           # 项目文档
```

## 📝 许可证

[MIT License](LICENSE)
